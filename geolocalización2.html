<!DOCTYPE html>
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<title>Leaflet geolocalización</title>
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

	<style>
		body {
		padding: 0;
		margin: 0;}
		html, body, #map {
		height: 100%;}
		
</style>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximumscale= 1.0, user-scalable=no" />
</head>

<body>
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script src="leaflet-heat.js"></script>
	<script src="http://leaflet.github.io/Leaflet.markercluster/example/realworld.10000.js"></script>

	
	<div id ="map"> </div>
	<script>
	
	var map = L.map('map');
		
	L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);
	
	function buscarLocalizacion(e) {
		L.marker(e.latlng).addTo(map);
		}
		
	function errorLocalizacion(e) {
		alert("No es posible encontrar su ubicación. Es posible que tenga que activar la geolocalización. Prueba con Firefox ;-)");
}

	map.on('locationerror', errorLocalizacion);
	map.on('locationfound', buscarLocalizacion);
	
	map.locate({setView: true, maxZoom:12});

addressPoints = addressPoints.map(function (p) { return [p[0], p[1]]; });

var heat = L.heatLayer(addressPoints).addTo(map);



	</script>

	</body>
</html>
